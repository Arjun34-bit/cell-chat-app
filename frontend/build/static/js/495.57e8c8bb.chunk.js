"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[495],{7495:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var r=n(2791),s=n(8348),i=n(8206),o=n(4087),a=n(3580),l=n(7342),c=n(9137),u=n(7718),d=n(6589),p=n(4165),h=n(5861),x=n(9439),f=n(1470),g=n(2392),j=n(8208),m=n(5442),b=n(311),w=n(2322),v=n(7806),C=n(4224),y=n(1836),S=n(4778),k=n(7689),Z=n(184);var I=function(e){e.history;var t=(0,r.useState)(!1),n=(0,x.Z)(t,2),s=n[0],i=n[1],o=(0,r.useState)(!1),a=(0,x.Z)(o,2),l=a[0],c=a[1],u=(0,r.useState)(),d=(0,x.Z)(u,2),I=d[0],P=d[1],N=(0,r.useState)(),O=(0,x.Z)(N,2),R=O[0],E=O[1],T=(0,r.useState)(),q=(0,x.Z)(T,2),z=q[0],L=q[1],F=(0,r.useState)(),W=(0,x.Z)(F,2),Y=W[0],_=W[1],A=(0,r.useState)(),B=(0,x.Z)(A,2),J=B[0],D=B[1],G=(0,r.useState)(),H=(0,x.Z)(G,2),M=H[0],U=H[1],V=(0,r.useState)(!1),K=(0,x.Z)(V,2),Q=K[0],X=K[1],$=(0,r.useState)(!1),ee=(0,x.Z)($,2),te=(ee[0],ee[1]),ne=(0,y.p)(),re=(0,k.s0)(),se=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t,n,r;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X(!0),I&&R&&z&&Y&&J){e.next=5;break}return ne({title:"Please fill all fields",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),X(!1),e.abrupt("return");case 5:if(te(!1),!(Y.length<6)){e.next=10;break}return ne({title:"Required more than 6 characters/digits",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"}),X(!1),e.abrupt("return");case 10:if(Y===J){e.next=14;break}return ne({title:"Passwords are not Matching",status:"error",duration:1500,isClosable:!0,position:"bottom-left"}),X(!1),e.abrupt("return");case 14:return e.prev=14,t={headers:{"Content-type":"application/json"}},e.next=18,S.Z.post("/api/users/",{name:I,email:z,phone:R,password:Y,pic:M},t);case 18:n=e.sent,r=n.data,ne({title:"Registration Successful",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),localStorage.setItem("userInfo",JSON.stringify(r)),X(!1),re("/chats"),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(14),ne({title:"Registration Failure",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0,position:"bottom-left"}),X(!1);case 30:case"end":return e.stop()}}),e,null,[[14,26]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(f.g,{spacing:"5px",fontFamily:"work sans",children:[(0,Z.jsxs)(g.NI,{id:"name",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Name :"}),(0,Z.jsx)(m.I,{placeholder:"Enter Your Name",onChange:function(e){return P(e.target.value)}})]}),(0,Z.jsxs)(g.NI,{id:"email",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Email :"}),(0,Z.jsx)(m.I,{placeholder:"Enter Your Email",onChange:function(e){return L(e.target.value)}})]}),(0,Z.jsxs)(g.NI,{id:"phone",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Contact :"}),(0,Z.jsxs)(b.B,{children:[(0,Z.jsx)(w.Ui,{color:"black",children:"+91"}),(0,Z.jsx)(m.I,{placeholder:"Enter Your Contact No.",onChange:function(e){return E(e.target.value)}})]})]}),(0,Z.jsxs)(g.NI,{id:"password",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Password :"}),(0,Z.jsxs)(b.B,{children:[(0,Z.jsx)(m.I,{type:s?"text":"password",placeholder:"Aleast 6 Characters or Digits",onChange:function(e){_(e.target.value),e.target.value<6&&ne({title:"Password length should be atleast 6",status:"info",duration:1500,isClosable:!0,position:"bottom"})}}),(0,Z.jsx)(v.x,{width:"4.5rem",children:(0,Z.jsx)(C.z,{h:"1.75rem",size:"sm",onClick:function(){return i(!s)},children:s?"Hide":"Show"})})]})]}),(0,Z.jsxs)(g.NI,{id:"confirmpassword",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Confirm Password :"}),(0,Z.jsxs)(b.B,{children:[(0,Z.jsx)(m.I,{type:l?"text":"password",placeholder:"Re-enter Your Password",onChange:function(e){return D(e.target.value)}}),(0,Z.jsx)(v.x,{width:"4.5rem",onClick:function(){return c(!l)},children:(0,Z.jsx)(C.z,{h:"1.75rem",size:"sm",children:l?"Hide":"Show"})})]})]}),(0,Z.jsxs)(g.NI,{id:"pic",children:[(0,Z.jsx)(j.l,{children:"Upload Profile Pic"}),(0,Z.jsx)(m.I,{type:"file",p:"1.5",accept:"image/*",onChange:function(e){return function(e){if(X(!0),void 0!==e){if("image/jpeg"!==e.type&&"image/png"!==e.type)return ne({title:"Please Select (JPEG or PNG) Image",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void X(!1);var t=new FormData;t.append("file",e),t.append("upload_preset","cell-app"),t.append("cloud_name","cell-chat-app"),fetch("https://api.cloudinary.com/v1_1/cell-chat-app/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){U(e.url.toString()),X(!1)})).catch((function(e){console.log(e),X(!1)}))}else ne({title:"Please Select an Image",status:"warning",duration:5e3,isClosable:!0,position:"bottom"})}(e.target.files[0])}})]}),(0,Z.jsx)(C.z,{className:"action-buttons",fontWeight:"bold",width:"100%",style:{marginTop:15},onClick:se,isLoading:Q,children:"Register Your Cell-Chat account"})]})},P=n(126),N=n(9975),O=n(581),R=n(2649),E=n(1211),T=n(7970),q=n(1216),z=n(6982),L=n(6898),F=n(6971),W=n.n(F),Y=function(e){var t=e.children,n=(0,r.useState)(),i=(0,x.Z)(n,2),a=i[0],l=i[1],c=(0,r.useState)(!1),u=(0,x.Z)(c,2),d=u[0],f=u[1],b=(0,r.useState)(!1),w=(0,x.Z)(b,2),v=w[0],I=w[1],P=(0,r.useState)(!1),L=(0,x.Z)(P,2),F=(L[0],L[1],(0,r.useState)()),Y=(0,x.Z)(F,2),_=Y[0],A=Y[1],B=(0,k.s0)(),J=(0,r.useState)(!1),D=(0,x.Z)(J,2),G=D[0],H=D[1],M=(0,y.p)(),U=(0,s.q)(),V=U.isOpen,K=U.onOpen,Q=U.onClose,X=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t,n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return M({title:"Please enter Valid Email",status:"warning",duration:3e3,position:"bottom",isClosable:!0}),e.abrupt("return");case 3:return e.prev=3,H(!0),t={headers:{"Content-type":"application/json"}},e.next=8,S.Z.post("/api/otp",{email:a},t);case 8:return n=e.sent,n.data,f(!0),I(!1),H(!1),M({title:"OTP sent to your Email",status:"success",duration:3e3,position:"bottom",isClosable:!0}),e.abrupt("return");case 17:e.prev=17,e.t0=e.catch(3),f(!1),I(!0),H(!1);case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t,n,r;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return M({title:"Please enter you OTP",status:"warning",duration:3e3,position:"bottom",isClosable:!0}),e.abrupt("return");case 3:return e.prev=3,M({title:"Signing In....",status:"loading",duration:2e3,position:"top",isClosable:!0}),t={headers:{"Content-type":"application/json"}},e.next=8,S.Z.post("/api/otp/verify",{otpval:_},t);case 8:n=e.sent,r=n.data,localStorage.setItem("userInfo",JSON.stringify(r)),B("/chats"),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(3),M({title:"Invalid OTP",status:"error",duration:3e3,position:"bottom",isClosable:!0}),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("span",{onClick:K,children:t}),(0,Z.jsxs)(N.u_,{blockScrollOnMount:!1,isOpen:V,onClose:Q,children:[(0,Z.jsx)(O.Z,{}),(0,Z.jsxs)(R.h,{bg:"black",color:"white",fontFamily:"work sans",children:[(0,Z.jsx)(E.x,{display:"flex",justifyContent:"center",children:"Login via OTP"}),(0,Z.jsx)(T.o,{}),(0,Z.jsxs)(q.f,{children:[(0,Z.jsxs)(g.NI,{id:"email",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Email :"}),(0,Z.jsx)(m.I,{placeholder:"Enter Your Email",value:a,onChange:function(e){return l(e.target.value)}}),v?(0,Z.jsx)(o.xu,{color:"red",fontWeight:"bold",fontFamily:"work sans",children:(0,Z.jsx)("div",{pl:2,children:"Email Not registered"})}):(0,Z.jsx)("div",{})]}),(0,Z.jsx)(o.xu,{display:"flex",justifyContent:"center",children:(0,Z.jsx)(C.z,{colorScheme:"blue",mt:3,width:"100%",onClick:X,isLoading:G,children:"Send OTP"})}),d?(0,Z.jsx)(o.xu,{mt:5,children:(0,Z.jsxs)("div",{children:[(0,Z.jsxs)(g.NI,{id:"phone",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Enter OTP :"}),(0,Z.jsx)(o.xu,{display:"flex",justifyContent:"center",color:"black",children:(0,Z.jsx)(W(),{OTPLength:4,otpType:"number",autoFocus:!0,value:_,onChange:A})})]}),(0,Z.jsx)(o.xu,{display:"flex",justifyContent:"center",children:(0,Z.jsx)(C.z,{colorScheme:"blue",mt:3,width:"100%",onClick:$,children:"Verify OTP & Login"})})]})}):(0,Z.jsx)("div",{})]}),(0,Z.jsx)(z.m,{})]})]})]})};var _=function(e){e.history;var t=(0,s.q)(),n=(t.isOpen,t.isClose,t.onToggle,(0,r.useState)()),i=(0,x.Z)(n,2),o=i[0],a=i[1],l=(0,r.useState)(),c=(0,x.Z)(l,2),u=c[0],d=c[1],w=(0,r.useState)(),I=(0,x.Z)(w,2),N=I[0],O=I[1],R=(0,r.useState)(),E=(0,x.Z)(R,2),T=E[0],q=E[1],z=(0,k.s0)(),L=(0,r.useState)(),F=(0,x.Z)(L,2),W=F[0],_=F[1],A=(0,y.p)(),B=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t,n,r;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!0),o&&u){e.next=6;break}return W||A({title:"Please fill all Fields",status:"warning",duration:5e3,position:"bottom",isClosable:!0}),_(!0),q(!1),e.abrupt("return");case 6:return _(!1),e.prev=7,t={headers:{"Content-type":"application/json"}},e.next=11,S.Z.post("api/users/login",{phone:o,password:u},t);case 11:return n=e.sent,r=n.data,A({title:"Login Successful, You Will Be Remembered",status:"success",duration:4e3,position:"bottom",isClosable:!0}),localStorage.setItem("userInfo",JSON.stringify(r)),z("/chats"),q(!1),e.abrupt("return");case 20:return e.prev=20,e.t0=e.catch(7),A({title:"Failure in Login",description:e.t0.response.data.message,status:"error",duration:1500,isClosable:!0,position:"bottom-left"}),q(!1),e.abrupt("return");case 25:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(f.g,{spacing:"5px",fontFamily:"work sans",children:[(0,Z.jsxs)(g.NI,{id:"phone",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Contact :"}),(0,Z.jsx)(m.I,{placeholder:"Enter Your Contact No.",value:o,onChange:function(e){return a(e.target.value)}})]}),(0,Z.jsxs)(g.NI,{id:"password",isRequired:!0,children:[(0,Z.jsx)(j.l,{children:"Password :"}),(0,Z.jsxs)(b.B,{children:[(0,Z.jsx)(m.I,{type:N?"text":"password",placeholder:"Enter Your Password",value:u,onChange:function(e){return d(e.target.value)}}),(0,Z.jsx)(v.x,{width:"4.5rem",children:(0,Z.jsx)(C.z,{h:"1.75rem",size:"sm",onClick:function(){return O(!N)},children:N?"Hide":"Show"})})]})]}),(0,Z.jsx)(C.z,{fontWeight:"bold",color:"black",variant:"solid",colorScheme:"gray",width:"100%",style:{marginTop:15},onClick:B,isLoading:T,children:"Login"}),(0,Z.jsx)(C.z,{variant:"solid",colorScheme:"blackAlpha",width:"100%",onClick:function(){a(1234567890),d("guest@10")},children:"Try the Guest Mode"}),(0,Z.jsx)("div",{textAlign:"center",fontWeight:"bold",children:"OR"}),(0,Z.jsx)(P.u,{label:"working-on-it",children:(0,Z.jsx)(Y,{children:(0,Z.jsx)(C.z,{variant:"solid",colorScheme:"blue",width:"100%",children:"Login via OTP"})})})]})},A=n(2277),B=function(){var e=(0,s.q)(),t=(e.isOpen,e.isClose,e.onToggle),n=(0,L.g)(),p=(n.loggedIn,n.setLoggedIn),h=(0,k.s0)();return(0,r.useEffect)((function(){JSON.parse(localStorage.getItem("userInfo"))&&(p(!0),h("chats"))})),window.addEventListener("beforeunload",(function(e){e.preventDefault(),window.history.forward()})),(0,Z.jsxs)(i.W,{maxW:"xl",marginTop:"1",children:[(0,Z.jsxs)(o.xu,{className:"cell-box",display:"flex","flex-basis":"200px",justifyContent:"center",p:3,bg:"white",w:"100%",m:"40px 0 15px 0",borderRadius:"lg",borderWidth:"0.5px",children:[(0,Z.jsx)("hr",{style:{color:"green"}}),(0,Z.jsx)("img",{src:A,alt:"cell-chat",style:{width:"100px",height:"100px"}}),(0,Z.jsx)("hr",{style:{color:"green"}})]}),(0,Z.jsx)(o.xu,{w:"100%",p:4,bg:"#4CAF50",borderRadius:"lg",color:"black",borderWidth:"1px",className:"component-box",children:(0,Z.jsxs)(a.m,{variant:"unstyled",children:[(0,Z.jsxs)(l.t,{mb:"1em",fontSize:"3xl",fontFamily:"work sans",textAlign:"center",children:[(0,Z.jsx)(c.O,{_selected:{color:"white",bg:"blue.500"},width:"50%",color:"black",children:"Login"}),(0,Z.jsx)(c.O,{_selected:{color:"white",bg:" blue.400"},width:"50%",color:"black",onClick:t,children:"Sign Up"})]}),(0,Z.jsxs)(u.n,{children:[(0,Z.jsx)(d.x,{children:(0,Z.jsx)(_,{})}),(0,Z.jsxs)(d.x,{children:[" ",(0,Z.jsx)(I,{})]})]})]})})]})}},2277:function(e,t,n){e.exports=n.p+"static/media/cellchat.b80a86220b1ed236aac5.jpg"}}]);
//# sourceMappingURL=495.57e8c8bb.chunk.js.map